<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn & Grow - Math & Reading Practice (Levels C & D)</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --success: #95E1D3;
            --purple: #A8E6CF;
            --orange: #FFB347;
            --bg-main: #FFF9F0;
            --text-dark: #2C3E50;
            --text-light: #7F8C8D;
            --shadow: 0 8px 24px rgba(0,0,0,0.12);
            --shadow-sm: 0 4px 12px rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Baloo 2', cursive;
            background: linear-gradient(135deg, #FFF9F0 0%, #FFE8D6 100%);
            min-height: 100vh;
            color: var(--text-dark);
            padding: 20px;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3em;
            color: var(--primary);
            text-shadow: 3px 3px 0 var(--accent);
            margin-bottom: 10px;
            font-weight: 800;
        }

        .header p {
            font-size: 1.2em;
            color: var(--text-light);
        }

        .student-selector {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.8s ease-out 0.2s both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .student-selector h2 {
            color: var(--secondary);
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .grade-buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .grade-btn {
            flex: 1;
            min-width: 200px;
            padding: 30px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--purple) 100%);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            font-family: 'Baloo 2', cursive;
        }

        .grade-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .grade-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--orange) 100%);
            transform: scale(1.05);
        }

        .subject-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease-out 0.4s both;
        }

        .subject-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            border: 3px solid transparent;
        }

        .subject-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow);
        }

        .subject-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, #FFF 0%, #FFE8D6 100%);
        }

        .subject-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .subject-card h3 {
            font-size: 1.5em;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .subject-card p {
            color: var(--text-light);
        }

        .worksheet-area {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.8s ease-out 0.6s both;
        }

        .worksheet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .worksheet-title {
            font-size: 2em;
            color: var(--primary);
            font-weight: 700;
        }

        .progress-container {
            flex: 1;
            min-width: 200px;
        }

        .progress-label {
            font-size: 0.9em;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 20px;
            background: #E8E8E8;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary) 0%, var(--success) 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .stars-earned {
            text-align: center;
            font-size: 2em;
            margin-top: 10px;
        }

        .question-card {
            background: linear-gradient(135deg, #F8F9FA 0%, #FFFFFF 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            border-left: 5px solid var(--secondary);
            transition: all 0.3s ease;
        }

        .question-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(5px);
        }

        .question-number {
            display: inline-block;
            background: var(--accent);
            color: var(--text-dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .question-text {
            font-size: 1.3em;
            color: var(--text-dark);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 3px solid #E8E8E8;
            border-radius: 10px;
            font-family: 'Comic Neue', cursive;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.1);
        }

        .answer-input.correct {
            border-color: var(--success);
            background: #F0FFF4;
        }

        .answer-input.incorrect {
            border-color: var(--primary);
            background: #FFF5F5;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .option-btn {
            padding: 20px;
            background: white;
            border: 3px solid #E8E8E8;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Baloo 2', cursive;
            font-weight: 600;
        }

        .option-btn:hover {
            border-color: var(--secondary);
            transform: scale(1.05);
        }

        .option-btn.selected {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }

        .option-btn.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .option-btn.incorrect {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 18px 40px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Baloo 2', cursive;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--purple) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: white;
            color: var(--text-dark);
            border: 3px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            color: white;
        }

        .feedback-message {
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: 600;
            text-align: center;
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .feedback-message.correct {
            background: var(--success);
            color: white;
        }

        .feedback-message.incorrect {
            background: #FFE8E8;
            color: var(--primary);
        }

        .completion-screen {
            text-align: center;
            padding: 60px 20px;
        }

        .completion-screen h2 {
            font-size: 3em;
            color: var(--primary);
            margin-bottom: 20px;
            animation: bounceIn 0.8s ease;
        }

        .score-display {
            font-size: 4em;
            color: var(--secondary);
            margin: 30px 0;
            font-weight: 800;
            animation: bounceIn 1s ease 0.2s both;
        }

        .star-animation {
            font-size: 6em;
            margin: 20px 0;
            animation: starPulse 1.5s ease infinite;
        }

        @keyframes starPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        .reading-passage {
            background: #FFFEF9;
            border: 3px solid var(--accent);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            line-height: 2;
            font-size: 1.15em;
            font-family: 'Comic Neue', cursive;
        }

        .reading-passage h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .reading-passage p {
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .worksheet-header {
                flex-direction: column;
            }
            
            .grade-buttons {
                flex-direction: column;
            }
            
            .subject-selector {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>üìö Learn & Grow üåü</h1>
            <p>Level C (5th Grade) & Level D (6th Grade) - Practice makes perfect!</p>
        </div>

        <div class="student-selector">
            <h2>Select Your Level</h2>
            <div class="grade-buttons">
                <button class="grade-btn" onclick="selectGrade('C')">
                    üéØ Level C (5th Grade)<br>
                    <small style="font-size: 0.8em; opacity: 0.9;">Multiplication & Division</small>
                </button>
                <button class="grade-btn" onclick="selectGrade('D')">
                    üöÄ Level D (6th Grade)<br>
                    <small style="font-size: 0.8em; opacity: 0.9;">Long Division, Fractions & Decimals</small>
                </button>
            </div>
        </div>

        <div id="subjectSelector" class="subject-selector hidden">
            <div class="subject-card" onclick="selectSubject('math')">
                <div class="subject-icon">üî¢</div>
                <h3>Math Practice</h3>
                <p>Numbers, operations, and problem solving</p>
            </div>
            <div class="subject-card" onclick="selectSubject('reading')">
                <div class="subject-icon">üìñ</div>
                <h3>Reading Practice</h3>
                <p>Comprehension and vocabulary</p>
            </div>
        </div>

        <div id="worksheetArea" class="worksheet-area hidden">
            <div class="worksheet-header">
                <div class="worksheet-title" id="worksheetTitle"></div>
                <div class="progress-container">
                    <div class="progress-label">Progress: <span id="progressText">0/10</span></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div class="stars-earned" id="starsEarned"></div>
                </div>
            </div>

            <div id="questionsContainer"></div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="checkAnswers()">Check My Answers ‚úì</button>
                <button class="btn btn-secondary" onclick="newWorksheet()">New Worksheet üîÑ</button>
                <button class="btn btn-secondary" onclick="backToMenu()">Back to Menu üè†</button>
            </div>
        </div>
    </div>

    <script>
        let currentGrade = null;
        let currentSubject = null;
        let currentQuestions = [];
        let userAnswers = {};
        let checkedOnce = false;

        const mathProblems = {
            'C': [
                // C 1-50: Mastering Tables (Multiplication Tables 2-9)
                { type: 'input', question: '3 √ó 4 = ?', answer: '12', category: 'Tables' },
                { type: 'input', question: '7 √ó 8 = ?', answer: '56', category: 'Tables' },
                { type: 'input', question: '9 √ó 6 = ?', answer: '54', category: 'Tables' },
                { type: 'input', question: '5 √ó 9 = ?', answer: '45', category: 'Tables' },
                { type: 'input', question: '8 √ó 7 = ?', answer: '56', category: 'Tables' },
                { type: 'input', question: '6 √ó 8 = ?', answer: '48', category: 'Tables' },
                { type: 'input', question: '9 √ó 9 = ?', answer: '81', category: 'Tables' },
                { type: 'input', question: '4 √ó 7 = ?', answer: '28', category: 'Tables' },
                { type: 'input', question: '8 √ó 6 = ?', answer: '48', category: 'Tables' },
                { type: 'input', question: '7 √ó 9 = ?', answer: '63', category: 'Tables' },
                
                // C 51-110: Multi-digit Multiplication (2-digit √ó 1-digit with carrying)
                { type: 'input', question: '48 √ó 6 = ?', answer: '288', category: 'Multi-digit' },
                { type: 'input', question: '37 √ó 4 = ?', answer: '148', category: 'Multi-digit' },
                { type: 'input', question: '56 √ó 7 = ?', answer: '392', category: 'Multi-digit' },
                { type: 'input', question: '89 √ó 5 = ?', answer: '445', category: 'Multi-digit' },
                { type: 'input', question: '64 √ó 8 = ?', answer: '512', category: 'Multi-digit' },
                { type: 'input', question: '73 √ó 9 = ?', answer: '657', category: 'Multi-digit' },
                
                // C 51-110: 3-digit √ó 1-digit
                { type: 'input', question: '325 √ó 4 = ?', answer: '1300', category: 'Multi-digit' },
                { type: 'input', question: '456 √ó 3 = ?', answer: '1368', category: 'Multi-digit' },
                { type: 'input', question: '582 √ó 6 = ?', answer: '3492', category: 'Multi-digit' },
                { type: 'input', question: '247 √ó 5 = ?', answer: '1235', category: 'Multi-digit' },
                { type: 'input', question: '639 √ó 7 = ?', answer: '4473', category: 'Multi-digit' },
                
                // C 111-200: Introduction to Division (reverse of multiplication tables)
                { type: 'input', question: '56 √∑ 8 = ?', answer: '7', category: 'Division' },
                { type: 'input', question: '72 √∑ 9 = ?', answer: '8', category: 'Division' },
                { type: 'input', question: '48 √∑ 6 = ?', answer: '8', category: 'Division' },
                { type: 'input', question: '63 √∑ 7 = ?', answer: '9', category: 'Division' },
                { type: 'input', question: '54 √∑ 6 = ?', answer: '9', category: 'Division' },
                { type: 'input', question: '81 √∑ 9 = ?', answer: '9', category: 'Division' },
                
                // C 111-200: Division with Remainders
                { type: 'input', question: '49 √∑ 6 = ? (answer as: quotient r remainder, e.g., 8 r 1)', answer: '8 r 1', category: 'Division with Remainders' },
                { type: 'input', question: '50 √∑ 7 = ? (answer as: quotient r remainder)', answer: '7 r 1', category: 'Division with Remainders' },
                { type: 'input', question: '38 √∑ 5 = ? (answer as: quotient r remainder)', answer: '7 r 3', category: 'Division with Remainders' },
                { type: 'input', question: '59 √∑ 8 = ? (answer as: quotient r remainder)', answer: '7 r 3', category: 'Division with Remainders' },
                { type: 'input', question: '67 √∑ 9 = ? (answer as: quotient r remainder)', answer: '7 r 4', category: 'Division with Remainders' },
            ],
            'D': [
                // D 1-80: Advanced Long Division (2-digit divisors)
                { type: 'input', question: '432 √∑ 12 = ?', answer: '36', category: 'Long Division' },
                { type: 'input', question: '675 √∑ 15 = ?', answer: '45', category: 'Long Division' },
                { type: 'input', question: '896 √∑ 16 = ?', answer: '56', category: 'Long Division' },
                { type: 'input', question: '588 √∑ 14 = ?', answer: '42', category: 'Long Division' },
                { type: 'input', question: '924 √∑ 21 = ?', answer: '44', category: 'Long Division' },
                { type: 'input', question: '756 √∑ 18 = ?', answer: '42', category: 'Long Division' },
                { type: 'input', question: '851 √∑ 23 = ? (answer as: quotient r remainder)', answer: '37 r 0', category: 'Long Division' },
                { type: 'input', question: '945 √∑ 27 = ?', answer: '35', category: 'Long Division' },
                
                // D 81-150: Fractions - Reducing/Simplifying
                { type: 'multiple', question: 'Simplify: 4/8', options: ['1/2', '2/4', '4/8', '1/4'], answer: '1/2', category: 'Simplifying Fractions' },
                { type: 'multiple', question: 'Simplify: 6/9', options: ['2/3', '3/4', '1/3', '6/9'], answer: '2/3', category: 'Simplifying Fractions' },
                { type: 'multiple', question: 'Simplify: 10/15', options: ['2/3', '5/7', '1/2', '10/15'], answer: '2/3', category: 'Simplifying Fractions' },
                { type: 'multiple', question: 'Simplify: 8/12', options: ['2/3', '4/6', '1/2', '8/12'], answer: '2/3', category: 'Simplifying Fractions' },
                
                // D 81-150: Improper Fractions to Mixed Numbers
                { type: 'input', question: 'Convert to mixed number: 7/3 = ? (answer as: 2 1/3)', answer: '2 1/3', category: 'Mixed Numbers' },
                { type: 'input', question: 'Convert to mixed number: 11/4 = ? (answer as: 2 3/4)', answer: '2 3/4', category: 'Mixed Numbers' },
                { type: 'input', question: 'Convert to mixed number: 17/5 = ? (answer as: 3 2/5)', answer: '3 2/5', category: 'Mixed Numbers' },
                { type: 'input', question: 'Convert to mixed number: 13/6 = ? (answer as: 2 1/6)', answer: '2 1/6', category: 'Mixed Numbers' },
                
                // D 81-150: Addition and Subtraction of Fractions (like denominators)
                { type: 'input', question: '2/5 + 1/5 = ? (answer as fraction, e.g., 3/5)', answer: '3/5', category: 'Fraction Addition' },
                { type: 'input', question: '4/7 + 2/7 = ? (answer as fraction)', answer: '6/7', category: 'Fraction Addition' },
                { type: 'input', question: '5/8 - 2/8 = ? (answer as fraction)', answer: '3/8', category: 'Fraction Subtraction' },
                { type: 'input', question: '7/9 - 4/9 = ? (answer as fraction)', answer: '3/9', category: 'Fraction Subtraction' },
                { type: 'input', question: '3/10 + 4/10 = ? (answer as fraction)', answer: '7/10', category: 'Fraction Addition' },
                
                // D 151-200: Multi-digit Multiplication (2-digit √ó 2-digit)
                { type: 'input', question: '24 √ó 35 = ?', answer: '840', category: 'Multi-digit Multiplication' },
                { type: 'input', question: '48 √ó 27 = ?', answer: '1296', category: 'Multi-digit Multiplication' },
                { type: 'input', question: '56 √ó 43 = ?', answer: '2408', category: 'Multi-digit Multiplication' },
                
                // D 151-200: 3-digit √ó 2-digit
                { type: 'input', question: '724 √ó 35 = ?', answer: '25340', category: 'Multi-digit Multiplication' },
                { type: 'input', question: '456 √ó 28 = ?', answer: '12768', category: 'Multi-digit Multiplication' },
                { type: 'input', question: '583 √ó 46 = ?', answer: '26818', category: 'Multi-digit Multiplication' },
                
                // D 151-200: Decimals - Basic notation and place value
                { type: 'input', question: '3.5 + 2.8 = ?', answer: '6.3', category: 'Decimals' },
                { type: 'input', question: '7.6 - 3.2 = ?', answer: '4.4', category: 'Decimals' },
                { type: 'input', question: '5.25 + 1.75 = ?', answer: '7', category: 'Decimals' },
                { type: 'input', question: '8.9 - 4.3 = ?', answer: '4.6', category: 'Decimals' },
                { type: 'multiple', question: 'Which is larger: 0.7 or 0.65?', options: ['0.7', '0.65', 'Equal', 'Cannot tell'], answer: '0.7', category: 'Decimals' },
            ]
        };

        const readingContent = {
            'C': [
                {
                    title: 'The Water Cycle',
                    passage: `Water on Earth is constantly moving through a process called the water cycle. This cycle has been happening for billions of years and is essential for all life on our planet.

The water cycle begins with evaporation. When the Sun heats up water in rivers, lakes, and oceans, some of it turns into water vapor and rises into the air. Plants also release water vapor through a process called transpiration.

As the water vapor rises higher into the atmosphere, it cools down and condenses into tiny water droplets, forming clouds. This process is called condensation. When the droplets become heavy enough, they fall back to Earth as precipitation‚Äîrain, snow, sleet, or hail.

When precipitation falls on land, some of it flows into streams and rivers, eventually reaching the ocean. This is called runoff. Some water also seeps into the ground, becoming groundwater that plants and trees can use. The cycle then begins again with evaporation.`,
                    questions: [
                        { type: 'multiple', question: 'What causes water to evaporate?', options: ['Wind', 'The Sun', 'Clouds', 'Rain'], answer: 'The Sun' },
                        { type: 'multiple', question: 'What is the process of water vapor turning into clouds called?', options: ['Evaporation', 'Precipitation', 'Condensation', 'Transpiration'], answer: 'Condensation' },
                        { type: 'multiple', question: 'Which of these is NOT a form of precipitation?', options: ['Rain', 'Snow', 'Fog', 'Hail'], answer: 'Fog' },
                        { type: 'input', question: 'What is water that seeps into the ground called? (one word)', answer: 'groundwater' },
                        { type: 'multiple', question: 'What process do plants use to release water vapor?', options: ['Evaporation', 'Condensation', 'Transpiration', 'Precipitation'], answer: 'Transpiration' },
                    ]
                },
                {
                    title: 'Benjamin Franklin',
                    passage: `Benjamin Franklin was one of the most remarkable people in American history. Born in 1706 in Boston, he became famous as an inventor, writer, scientist, and statesman.

As a young man, Franklin worked as a printer and started his own newspaper. He became known for his witty sayings like "Early to bed and early to rise makes a man healthy, wealthy, and wise." He published these sayings in a book called Poor Richard's Almanack.

Franklin was also a brilliant inventor. He invented the lightning rod, which protects buildings from lightning strikes. He also created bifocal glasses, which help people see both near and far. He never patented his inventions because he believed they should benefit everyone.

In his later years, Franklin helped write the Declaration of Independence and the United States Constitution. He also served as an ambassador to France, helping to secure French support during the American Revolution. Franklin died in 1790 at the age of 84, leaving behind a legacy of innovation and service.`,
                    questions: [
                        { type: 'multiple', question: 'What was Benjamin Franklin\'s first job?', options: ['Inventor', 'Printer', 'Politician', 'Teacher'], answer: 'Printer' },
                        { type: 'multiple', question: 'What book did Franklin publish with witty sayings?', options: ['The Constitution', 'Poor Richard\'s Almanack', 'The Declaration', 'Boston Times'], answer: 'Poor Richard\'s Almanack' },
                        { type: 'multiple', question: 'What protects buildings from lightning?', options: ['Bifocals', 'Lightning rod', 'Newspaper', 'Almanack'], answer: 'Lightning rod' },
                        { type: 'multiple', question: 'Why didn\'t Franklin patent his inventions?', options: ['He forgot', 'He was too busy', 'He wanted everyone to benefit', 'They weren\'t important'], answer: 'He wanted everyone to benefit' },
                        { type: 'input', question: 'What country did Franklin serve as ambassador to? (one word)', answer: 'France' },
                    ]
                }
            ],
            'D': [
                {
                    title: 'Photosynthesis: How Plants Make Food',
                    passage: `Have you ever wondered how plants make their own food? Unlike animals, plants don't need to eat other organisms to survive. Instead, they create their own food through a remarkable process called photosynthesis.

Photosynthesis occurs mainly in the leaves of plants. Leaves contain millions of tiny structures called chloroplasts, which give plants their green color. Inside chloroplasts is a pigment called chlorophyll that captures energy from sunlight.

The process begins when plants absorb water through their roots and carbon dioxide from the air through tiny pores called stomata. Using the energy captured by chlorophyll, plants combine water and carbon dioxide to produce glucose (a type of sugar) and oxygen. The chemical equation for photosynthesis is: 6CO‚ÇÇ + 6H‚ÇÇO + light energy ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ.

The glucose produced provides energy for the plant to grow and carry out life processes. The oxygen is released into the air as a waste product‚Äîwhich is fortunate for us because we need oxygen to breathe! In fact, plants produce most of the oxygen in Earth's atmosphere.

Photosynthesis is essential for life on Earth. It forms the foundation of most food chains, as plants are eaten by herbivores, which are in turn eaten by carnivores. Without photosynthesis, life as we know it could not exist.`,
                    questions: [
                        { type: 'multiple', question: 'Where does photosynthesis mainly occur in plants?', options: ['Roots', 'Stems', 'Leaves', 'Flowers'], answer: 'Leaves' },
                        { type: 'multiple', question: 'What gives plants their green color?', options: ['Glucose', 'Oxygen', 'Chlorophyll', 'Stomata'], answer: 'Chlorophyll' },
                        { type: 'input', question: 'What are the tiny pores that absorb carbon dioxide called? (one word)', answer: 'stomata' },
                        { type: 'multiple', question: 'What type of sugar do plants produce?', options: ['Fructose', 'Glucose', 'Sucrose', 'Lactose'], answer: 'Glucose' },
                        { type: 'multiple', question: 'What "waste product" do plants release that we need?', options: ['Carbon dioxide', 'Water', 'Glucose', 'Oxygen'], answer: 'Oxygen' },
                    ]
                },
                {
                    title: 'The Journey of the Mayflower',
                    passage: `In September 1620, a small ship called the Mayflower set sail from Plymouth, England, carrying 102 passengers. These passengers, known as Pilgrims, were seeking religious freedom and a new life in America. They faced a dangerous journey across the Atlantic Ocean that would change the course of history.

The voyage was extremely difficult. The ship was only about 100 feet long‚Äîroughly the size of a modern volleyball court‚Äîand was packed with passengers, crew, supplies, and even farm animals. Storms battered the vessel, and one main beam cracked during the journey. The passengers were seasick and frightened, but they pressed on.

After 66 days at sea, the Mayflower finally reached land in November 1620. However, they had been blown off course and arrived at Cape Cod in present-day Massachusetts instead of their intended destination near the Hudson River. The Pilgrims decided to settle there and established Plymouth Colony.

Before leaving the ship, the male passengers signed an agreement called the Mayflower Compact. This document established a government based on majority rule and is considered one of the first examples of self-government in America. It stated that they would create "just and equal laws" for the good of the colony.

The first winter was brutal. Nearly half of the Pilgrims died from disease and harsh conditions. However, with help from the Wampanoag people, particularly a man named Squanto, the survivors learned to farm in their new land. In autumn 1621, they celebrated their first successful harvest with a feast of thanksgiving‚Äîan event that became the foundation for the American holiday of Thanksgiving.`,
                    questions: [
                        { type: 'input', question: 'How many passengers were on the Mayflower? (number only)', answer: '102' },
                        { type: 'multiple', question: 'How long did the voyage take?', options: ['40 days', '50 days', '66 days', '80 days'], answer: '66 days' },
                        { type: 'multiple', question: 'Where did the Pilgrims originally intend to land?', options: ['Cape Cod', 'Plymouth', 'Near the Hudson River', 'Boston'], answer: 'Near the Hudson River' },
                        { type: 'input', question: 'What was the name of the document signed before leaving the ship? (three words)', answer: 'Mayflower Compact' },
                        { type: 'multiple', question: 'About how many Pilgrims survived the first winter?', options: ['All of them', 'About half', 'Only a few', 'None of them'], answer: 'About half' },
                    ]
                }
            ]
        };

        function selectGrade(grade) {
            currentGrade = grade;
            document.querySelectorAll('.grade-btn').forEach(btn => btn.classList.remove('active'));
            event.target.closest('.grade-btn').classList.add('active');
            document.getElementById('subjectSelector').classList.remove('hidden');
        }

        function selectSubject(subject) {
            currentSubject = subject;
            document.querySelectorAll('.subject-card').forEach(card => card.classList.remove('active'));
            event.target.closest('.subject-card').classList.add('active');
            
            setTimeout(() => {
                generateWorksheet();
            }, 300);
        }

        function generateWorksheet() {
            checkedOnce = false;
            userAnswers = {};
            
            const worksheetArea = document.getElementById('worksheetArea');
            const questionsContainer = document.getElementById('questionsContainer');
            const worksheetTitle = document.getElementById('worksheetTitle');
            
            worksheetArea.classList.remove('hidden');
            questionsContainer.innerHTML = '';
            
            if (currentSubject === 'math') {
                worksheetTitle.textContent = `Level ${currentGrade} Math Practice`;
                currentQuestions = getRandomQuestions(mathProblems[currentGrade], 10);
                renderMathQuestions();
            } else {
                worksheetTitle.textContent = `Level ${currentGrade} Reading Comprehension`;
                const readingSet = readingContent[currentGrade][Math.floor(Math.random() * readingContent[currentGrade].length)];
                currentQuestions = readingSet.questions;
                renderReadingQuestions(readingSet);
            }
            
            updateProgress();
            
            worksheetArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function getRandomQuestions(questions, count) {
            const shuffled = [...questions].sort(() => Math.random() - 0.5);
            return shuffled.slice(0, Math.min(count, questions.length));
        }

        function renderMathQuestions() {
            const container = document.getElementById('questionsContainer');
            
            currentQuestions.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-number">Question ${index + 1} ${q.category ? `<span style="opacity: 0.7; font-size: 0.85em;">‚Ä¢ ${q.category}</span>` : ''}</div>
                    <div class="question-text">${q.question}</div>
                    ${q.type === 'input' 
                        ? `<input type="text" class="answer-input" id="answer-${index}" 
                             placeholder="Type your answer here..."
                             onchange="saveAnswer(${index}, this.value)">`
                        : `<div class="options-container">
                             ${q.options.map((opt, i) => 
                                `<button class="option-btn" onclick="selectOption(${index}, '${opt}', this)">
                                    ${opt}
                                 </button>`
                             ).join('')}
                           </div>`
                    }
                    <div id="feedback-${index}"></div>
                `;
                container.appendChild(questionCard);
            });
        }

        function renderReadingQuestions(readingSet) {
            const container = document.getElementById('questionsContainer');
            
            const passageDiv = document.createElement('div');
            passageDiv.className = 'reading-passage';
            passageDiv.innerHTML = `
                <h3>${readingSet.title}</h3>
                ${readingSet.passage.split('\n\n').map(p => `<p>${p}</p>`).join('')}
            `;
            container.appendChild(passageDiv);
            
            currentQuestions.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.innerHTML = `
                    <div class="question-number">Question ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    ${q.type === 'input' 
                        ? `<input type="text" class="answer-input" id="answer-${index}" 
                             placeholder="Type your answer here..."
                             onchange="saveAnswer(${index}, this.value)">`
                        : `<div class="options-container">
                             ${q.options.map((opt, i) => 
                                `<button class="option-btn" onclick="selectOption(${index}, '${opt}', this)">
                                    ${opt}
                                 </button>`
                             ).join('')}
                           </div>`
                    }
                    <div id="feedback-${index}"></div>
                `;
                container.appendChild(questionCard);
            });
        }

        function saveAnswer(questionIndex, answer) {
            userAnswers[questionIndex] = answer.trim();
        }

        function selectOption(questionIndex, option, button) {
            const container = button.parentElement;
            container.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            userAnswers[questionIndex] = option;
        }

        function checkAnswers() {
            let correctCount = 0;
            
            currentQuestions.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const feedbackDiv = document.getElementById(`feedback-${index}`);
                const inputElement = document.getElementById(`answer-${index}`);
                
                if (!userAnswer) {
                    feedbackDiv.innerHTML = '<div class="feedback-message incorrect">‚ö†Ô∏è Please answer this question!</div>';
                    return;
                }
                
                const isCorrect = checkAnswer(userAnswer, q.answer);
                
                if (isCorrect) {
                    correctCount++;
                    feedbackDiv.innerHTML = '<div class="feedback-message correct">‚ú® Excellent! That\'s correct!</div>';
                    if (inputElement) {
                        inputElement.classList.add('correct');
                        inputElement.classList.remove('incorrect');
                    }
                    highlightCorrectOption(index, q.answer);
                } else {
                    feedbackDiv.innerHTML = `<div class="feedback-message incorrect">üí° Not quite. The answer is: ${q.answer}</div>`;
                    if (inputElement) {
                        inputElement.classList.add('incorrect');
                        inputElement.classList.remove('correct');
                    }
                    highlightIncorrectOption(index, userAnswer, q.answer);
                }
            });
            
            const percentage = (correctCount / currentQuestions.length) * 100;
            updateProgress(correctCount);
            
            if (correctCount === currentQuestions.length) {
                setTimeout(() => {
                    showCompletionScreen(correctCount);
                }, 1500);
            }
            
            checkedOnce = true;
        }

        function checkAnswer(userAnswer, correctAnswer) {
            const normalizeAnswer = (ans) => {
                return ans.toString().toLowerCase().replace(/[^a-z0-9./]/g, '');
            };
            return normalizeAnswer(userAnswer) === normalizeAnswer(correctAnswer);
        }

        function highlightCorrectOption(questionIndex, correctAnswer) {
            const container = document.getElementById(`feedback-${questionIndex}`).parentElement;
            const buttons = container.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                if (btn.textContent.trim() === correctAnswer) {
                    btn.classList.add('correct');
                }
            });
        }

        function highlightIncorrectOption(questionIndex, userAnswer, correctAnswer) {
            const container = document.getElementById(`feedback-${questionIndex}`).parentElement;
            const buttons = container.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                const btnText = btn.textContent.trim();
                if (btnText === userAnswer) {
                    btn.classList.add('incorrect');
                }
                if (btnText === correctAnswer) {
                    btn.classList.add('correct');
                }
            });
        }

        function updateProgress(correct = 0) {
            const answered = Object.keys(userAnswers).length;
            const total = currentQuestions.length;
            
            document.getElementById('progressText').textContent = `${answered}/${total}`;
            document.getElementById('progressFill').style.width = `${(answered / total) * 100}%`;
            
            if (correct > 0) {
                const stars = '‚≠ê'.repeat(Math.min(correct, 10));
                document.getElementById('starsEarned').textContent = stars;
            }
        }

        function showCompletionScreen(score) {
            const container = document.getElementById('questionsContainer');
            const total = currentQuestions.length;
            const percentage = (score / total) * 100;
            
            let message = '';
            let emoji = '';
            
            if (percentage === 100) {
                message = 'Perfect Score!';
                emoji = 'üèÜ';
            } else if (percentage >= 80) {
                message = 'Great Job!';
                emoji = 'üåü';
            } else if (percentage >= 60) {
                message = 'Good Work!';
                emoji = 'üëç';
            } else {
                message = 'Keep Practicing!';
                emoji = 'üí™';
            }
            
            container.innerHTML = `
                <div class="completion-screen">
                    <h2>${message}</h2>
                    <div class="star-animation">${emoji}</div>
                    <div class="score-display">${score}/${total}</div>
                    <p style="font-size: 1.3em; color: var(--text-light); margin: 20px 0;">
                        You got ${percentage.toFixed(0)}% correct!
                    </p>
                </div>
            `;
        }

        function newWorksheet() {
            generateWorksheet();
        }

        function backToMenu() {
            document.getElementById('worksheetArea').classList.add('hidden');
            document.getElementById('subjectSelector').classList.remove('hidden');
            document.getElementById('starsEarned').textContent = '';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>